{"version":3,"file":"md-parser.cjs.production.min.js","sources":["../src/Token.ts","../src/markup/Image.ts","../src/TokenReader.ts","../src/BaseParser.ts","../src/markup/Paragraph.ts","../src/markup/Header.ts","../src/markup/Text.ts","../src/markup/BlockMarkableItem.ts","../src/markup/Strikeout.ts","../src/markup/Strong.ts","../src/markup/Emphasis.ts","../src/markup/Code.ts","../src/MdParser.ts"],"sourcesContent":["export enum Token {\n  END,\n  EMPHASIS,\n  STRONG,\n  STRIKEOUT,\n  CODE,\n  TEXT,\n  _EMPHASIS,\n  __STRONG,\n  IMG\n}\n","import {BlockItem} from './BlockItem';\n\nexport class Image implements BlockItem {\n  private readonly name: string;\n  private readonly src: string;\n\n  constructor(name: string, src: string) {\n    this.name = name;\n    this.src = src;\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push('<img alt=\\'');\n    st.push(this.name);\n    st.push('\\' src=\\'');\n    st.push(this.src);\n    st.push('\\'>');\n  }\n\n  toMarkdown(st: Array<string>): void {\n    throw st;\n  }\n\n  toText(st: Array<string>): void {\n    st.push('');\n  }\n\n\n}\n","import { Token } from './Token';\nimport { Image } from './markup/Image';\n\nexport class TokenReader {\n  private readonly source: string = '';\n\n  private pos: number = 0;\n\n  private curToken: Token = Token.CODE;\n\n  private curStringToken: string = '';\n\n  private tags: string[] = ['**', '__', '--', '*', '_', '`'];\n\n  private imgName: string = '';\n\n  private imgSrc: string = '';\n\n  private strToToken = new Map([\n    ['**', Token.STRONG],\n    ['*', Token.EMPHASIS],\n    ['--', Token.STRIKEOUT],\n    ['`', Token.CODE],\n    ['_', Token._EMPHASIS],\n    ['__', Token.__STRONG],\n    ['![', Token.IMG],\n  ]);\n\n  private curTag: string = '';\n\n  constructor(source: string, isImageRequired?: boolean) {\n    if (isImageRequired) {\n      this.tags.push('![');\n    }\n    this.source = source;\n    this.pos = 0;\n  }\n\n  private checkTag(): boolean {\n    for (const tag of this.tags) {\n      if (this.source.startsWith(tag, this.pos)) {\n        this.curTag = tag;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private test(ch: string): boolean {\n    return this.pos < this.source.length && ch === this.source[this.pos];\n  }\n\n  private parseImg(): void {\n    const start: number = this.pos;\n    let mid: number;\n    let end: number;\n    while (this.pos < this.source.length &&\n          !this.source.startsWith('](', this.pos)) {\n      this.pos++;\n    }\n    if (this.pos < this.source.length && this.source.startsWith('](', this.pos)) {\n      mid = this.pos;\n      while (this.pos < this.source.length && !this.source.startsWith(')', this.pos)) {\n        this.pos++;\n      }\n      if (this.pos < this.source.length && this.source.startsWith(')', this.pos)) {\n        end = this.pos;\n        this.imgName = this.source.substring(start, mid);\n        this.imgSrc = this.source.substring(mid + 2, end);\n        this.pos++;\n        return;\n      }\n    }\n    throw 'atata';\n  }\n\n  public getImg(): Image {\n    return new Image(this.imgName, this.imgSrc);\n  }\n\n  public nextToken(): Token {\n    if (this.pos >= this.source.length) {\n      return Token.END;\n    }\n\n    if (this.checkTag()) {\n      this.curStringToken = this.curTag;\n      const temp = this.strToToken.get(this.curTag);\n      this.curToken = temp === undefined ? Token.CODE : temp;\n      this.pos += this.curTag.length;\n      if (this.curToken === Token.IMG) {\n        this.parseImg();\n      }\n      return this.curToken;\n    }\n\n    const sb: Array<string> = new Array<string>();\n\n    while (this.pos < this.source.length && !this.checkTag()) {\n      const ch: string = this.source.charAt(this.pos++);\n      if (ch === '<') {\n        sb.push('&lt;');\n      } else if (ch === '>') {\n        sb.push('&gt;');\n      } else if (ch === '&') {\n        sb.push('&amp;');\n      } else if (ch === '\\\\' && this.pos < this.source.length && (this.test('*') || this.test('_'))) {\n        sb.push(this.source.charAt(this.pos++));\n      } else {\n        sb.push(ch);\n      }\n    }\n\n    this.curToken = Token.TEXT;\n\n    this.curStringToken = sb.join('');\n\n    return this.curToken;\n  }\n\n\n  public getStringToken(): string {\n    return this.curStringToken;\n  }\n}\n","import { TokenReader } from './TokenReader';\nimport { Token } from './Token';\n\nexport abstract class BaseParser {\n  protected tr: TokenReader;\n  protected curToken: Token;\n  protected curStringToken: string;\n\n  protected nextToken(): void {\n    this.curToken = this.tr.nextToken();\n    this.curStringToken = this.tr.getStringToken();\n  }\n\n  protected constructor() {\n    this.tr = new TokenReader('');\n    this.curToken = Token.CODE;\n    this.curStringToken = '';\n  }\n}\n","import {Markable} from './Markable';\nimport {BlockItem} from './BlockItem';\n\nexport class Paragraph implements Markable {\n  private readonly elements: Array<BlockItem>;\n\n  constructor(elements: Array<BlockItem>) {\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push('<p>');\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push('</p>');\n  }\n\n  toMarkdown(st: Array<string>): void {\n    for (const elem of this.elements) {\n      elem.toMarkdown(st);\n    }\n  }\n\n  toText(st: Array<string>) {\n    for (const elem of this.elements) {\n      elem.toText(st);\n    }\n  }\n\n\n}\n","import {Markable} from './Markable';\nimport {BlockItem} from './BlockItem';\n\nexport class Header implements Markable {\n\n  private elements: Array<BlockItem>;\n  private hLevel: number;\n\n  constructor(elements: Array<BlockItem>, hLevel: number) {\n    this.hLevel = hLevel;\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push(`<h${this.hLevel}>`);\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push(`</h${this.hLevel}>`);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    throw st;\n  }\n\n  toText(st: Array<string>): void {\n    st.push(\"\");\n  }\n\n}\n","import {BlockItem} from './BlockItem';\n\nexport class Text implements BlockItem {\n  private text: string;\n\n  constructor(text: string) {\n    this.text = text;\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n  toText(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n}\n","import {BlockItem} from './BlockItem';\n\nexport abstract class BlockMarkableItem implements BlockItem {\n  private elements: Array<BlockItem>;\n\n  protected constructor(elements: Array<BlockItem>) {\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  protected toMarkdownSuper(start: string, end: string, st: Array<string>): void {\n    st.push(start);\n    for (const elem of this.elements) {\n      elem.toMarkdown(st);\n    }\n    st.push(end);\n  }\n\n  protected toHtmlSuper(start: string, end: string, st: Array<string>): void {\n    st.push(start);\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push(end);\n  }\n\n  public toText(st: Array<string>): void {\n    for (const elem of this.elements) {\n      elem.toText(st);\n    }\n  }\n\n  abstract toMarkdown(st: Array<string>): void;\n\n  abstract toHtml(st: Array<string>): void;\n}\n\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Strikeout extends BlockMarkableItem {\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<s>', '</s>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('~', '~', st);\n  }\n}\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Strong extends BlockMarkableItem {\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<strong>', '</strong>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('__', '__', st);\n  }\n}\n","import {BlockItem} from './BlockItem';\nimport {BlockMarkableItem} from './BlockMarkableItem';\n\nexport class Emphasis extends BlockMarkableItem {\n\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<em>', '</em>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('*', '*', st);\n  }\n}\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Code extends BlockMarkableItem {\n\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<code>', '</code>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('`', '`', st);\n  }\n}\n","import { BaseParser } from './BaseParser';\nimport { Markable } from './markup/Markable';\nimport { TokenReader } from './TokenReader';\nimport { Paragraph } from './markup/Paragraph';\nimport { Header } from './markup/Header';\nimport { Token } from './Token';\nimport { BlockItem } from './markup/BlockItem';\nimport { Text } from './markup/Text';\nimport { Strikeout } from './markup/Strikeout';\nimport { Strong } from './markup/Strong';\nimport { Emphasis } from './markup/Emphasis';\nimport { Code } from './markup/Code';\n\n\nexport class MdParser extends BaseParser {\n  private readonly source: Array<string>;\n  private curElem: string = '';\n  private curLine: string | null = '';\n  private headerStarts = ['###### ', '##### ', '#### ', '### ', '## ', '# '];\n\n  private hLevel: number = 0;\n\n  thrownError: boolean = false;\n\n  isHeaderRequired: boolean = false;\n  isImageRequired: boolean = false;\n\n  constructor(data: string, isHeaderRequired?: boolean, isImageRequired?: boolean) {\n    super();\n    this.isImageRequired = !!isImageRequired;\n    this.isHeaderRequired = !!isHeaderRequired;\n    this.source = data.trim().split('\\n');\n  }\n\n  public parseToHtml(): string {\n    const res = this.parse();\n    const html: Array<string> = [];\n    const md: Array<string> = [];\n    const text: Array<string> =[];\n    console.log('html', [html]);\n    console.log('md', [md]);\n    console.log('text', [text]);\n    for (const elem of res) {\n      elem.toText(text);\n      elem.toHtml(html);\n      elem.toMarkdown(md);\n    }\n    const htmlStr: string = html.join('');\n    const mdStr: string = md.join('');\n    const textStr: string = text.join('');\n    console.log('html', [htmlStr]);\n    console.log('md', [mdStr]);\n    console.log('text', [textStr]);\n    if (textStr === '') {\n      return mdStr;\n    } else {\n      return htmlStr;\n    }\n  }\n\n  public parse(): Array<Markable> {\n    const ans = new Array<Markable>();\n    while (this.nextElement()) {\n      if (this.isParagraph()) {\n        this.tr = new TokenReader(this.curElem, this.isImageRequired);\n        this.nextToken();\n        ans.push(new Paragraph(this.parseItems()));\n      } else {\n        this.tr = new TokenReader(this.curElem.substring(this.hLevel + 1), this.isImageRequired);\n        this.nextToken();\n        ans.push(new Header(this.parseItems(), this.hLevel));\n      }\n    }\n    return ans;\n  }\n\n  private isText(token: Token) {\n    return token === Token.TEXT;\n  }\n\n  private parseItems(): Array<BlockItem> {\n    const ans = new Array<BlockItem>();\n    while (this.curToken !== Token.END) {\n      if (this.isText(this.curToken)) {\n        ans.push(new Text(this.curStringToken));\n        this.nextToken();\n      } else if (this.curToken === Token.IMG) {\n        ans.push(this.tr.getImg());\n        this.nextToken();\n      } else {\n        const start: Token = this.curToken;\n        this.nextToken();\n        ans.push(...this.parseItem(start));\n      }\n    }\n    return ans;\n  }\n\n  private parseItem(start: Token): Array<BlockItem> {\n    const ans = new Array<BlockItem>();\n    while (this.curToken !== Token.END && this.curToken !== start) {\n      if (this.isText(this.curToken)) {\n        ans.push(new Text(this.curStringToken));\n        this.nextToken();\n      } else if (this.curToken === Token.IMG) {\n        ans.push(this.tr.getImg());\n        this.nextToken();\n      } else {\n        const st: Token = this.curToken;\n        this.nextToken();\n        ans.push(...this.parseItem(st));\n      }\n    }\n    if (this.curToken === start) {\n      this.nextToken();\n      return this.create(ans, start);\n    } else if (start === Token.EMPHASIS || start === Token._EMPHASIS) {\n      const temp = new Array<BlockItem>();\n      temp.push(new Text(this.tokenToString(start)));\n      temp.push(...ans);\n      this.nextToken();\n      return temp;\n    } else {\n      this.thrownError = true;\n      return [];\n    }\n  }\n\n  private tokenToString(token: Token): string {\n    switch (token) {\n      case Token.STRIKEOUT: {\n        return '--';\n      }\n      case Token.STRONG: {\n        return '**';\n      }\n      case Token.__STRONG: {\n        return '__';\n      }\n      case Token.EMPHASIS: {\n        return '*';\n      }\n      case Token._EMPHASIS: {\n        return '_';\n      }\n      case Token.CODE: {\n        return '`';\n      }\n      default: {\n        this.thrownError = true;\n        return \"\";\n      }\n    }\n  }\n\n  private create(ans: Array<BlockItem>, token: Token): Array<BlockItem> {\n    switch (token) {\n      case Token.STRIKEOUT: {\n        return [new Strikeout(ans)];\n      }\n      case Token.STRONG: {\n        return [new Strong(ans)];\n      }\n      case Token.__STRONG: {\n        return [new Strong(ans)];\n      }\n      case Token.EMPHASIS: {\n        return [new Emphasis(ans)];\n      }\n      case Token._EMPHASIS: {\n        return [new Emphasis(ans)];\n      }\n      case Token.CODE: {\n        return [new Code(ans)];\n      }\n      default: {\n        this.thrownError = true;\n        return [new Code(ans)];\n      }\n    }\n  }\n\n  private skipEmpties(): void {\n    this.curLine = this.next();\n    while (this.curLine !== null && this.curLine === '') {\n      this.curLine = this.next();\n    }\n  }\n\n  private nextElement(): boolean {\n    this.skipEmpties();\n    if (this.curLine === null) {\n      return false;\n    }\n    const elem = new Array<string>();\n    elem.push(this.curLine);\n    this.curLine = this.next();\n    while (this.curLine !== null && this.curLine !== '') {\n      elem.push('\\n');\n      elem.push(this.curLine);\n      this.curLine = this.next();\n    }\n    this.curElem = elem.join('');\n    return true;\n  }\n\n  next(): string | null {\n    const exp = this.source.length === 0 ? null : this.source.shift();\n    if (exp !== undefined) {\n      return exp;\n    }\n    return null;\n  }\n\n  private isParagraph(): boolean {\n    if (this.isHeaderRequired) {\n      for (const headerStart of this.headerStarts) {\n        if (this.curElem.startsWith(headerStart)) {\n          this.hLevel = headerStart.length - 1;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n}\n"],"names":["Token","Image","name","src","toHtml","st","push","this","toMarkdown","toText","TokenReader","source","isImageRequired","CODE","Map","STRONG","EMPHASIS","STRIKEOUT","_EMPHASIS","__STRONG","IMG","tags","pos","checkTag","tag","startsWith","curTag","test","ch","length","parseImg","mid","end","start","imgName","substring","imgSrc","getImg","nextToken","END","curStringToken","temp","strToToken","get","curToken","undefined","sb","Array","charAt","TEXT","join","getStringToken","BaseParser","tr","Paragraph","elements","Header","hLevel","Text","text","BlockMarkableItem","toMarkdownSuper","toHtmlSuper","Strikeout","_BlockMarkableItem","Strong","Emphasis","Code","MdParser","data","isHeaderRequired","trim","split","parseToHtml","res","parse","html","md","console","log","elem","htmlStr","mdStr","textStr","ans","nextElement","isParagraph","curElem","parseItems","isText","token","parseItem","create","tokenToString","thrownError","skipEmpties","curLine","next","exp","shift","headerStarts","headerStart"],"mappings":"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"}