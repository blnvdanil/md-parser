"use strict";function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,e(t,r)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,o,i){return(n=r()?Reflect.construct:function(t,r,n){var o=[null];o.push.apply(o,r);var i=new(Function.bind.apply(t,o));return n&&e(i,n.prototype),i}).apply(null,arguments)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return o(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s;Object.defineProperty(exports,"__esModule",{value:!0}),function(t){t[t.END=0]="END",t[t.EMPHASIS=1]="EMPHASIS",t[t.STRONG=2]="STRONG",t[t.STRIKEOUT=3]="STRIKEOUT",t[t.CODE=4]="CODE",t[t.TEXT=5]="TEXT"}(s||(s={}));var u=function(){function t(t){this.source="",this.pos=0,this.curToken=s.CODE,this.curStringToken="",this.tags=["**","__","~~","```"],this.strToToken=new Map([["**",s.STRONG],["__",s.EMPHASIS],["~~",s.STRIKEOUT],["```",s.CODE]]),this.curTag="",this.source=t,this.pos=0}var e=t.prototype;return e.checkTag=function(){for(var t,e=i(this.tags);!(t=e()).done;){var r=t.value;if(this.source.startsWith(r,this.pos))return this.curTag=r,!0}return!1},e.test=function(t){return this.pos<this.source.length&&t===this.source[this.pos]},e.nextToken=function(){if(this.pos>=this.source.length)return s.END;if(this.checkTag()){this.curStringToken=this.curTag;var t=this.strToToken.get(this.curTag);return this.curToken=void 0===t?s.CODE:t,this.pos+=this.curTag.length,this.curToken}for(var e=new Array;this.pos<this.source.length&&!this.checkTag();){var r=this.source.charAt(this.pos++);"<"===r?e.push("&lt;"):">"===r?e.push("&gt;"):"&"===r?e.push("&amp;"):"\\"===r&&this.pos<this.source.length&&(this.test("*")||this.test("_"))?e.push(this.source.charAt(this.pos++)):e.push("\n"===r?"<br>":r)}return this.curToken=s.TEXT,this.curStringToken=e.join(""),this.curToken},e.getStringToken=function(){return this.curStringToken},t}(),c=function(){function t(){this.tr=new u(""),this.curToken=s.CODE,this.curStringToken=""}return t.prototype.nextToken=function(){this.curToken=this.tr.nextToken(),this.curStringToken=this.tr.getStringToken()},t}(),h=function(){function t(t){this.elements=n(Array,t)}var e=t.prototype;return e.toHtml=function(t){t.push("");for(var e,r=i(this.elements);!(e=r()).done;)e.value.toHtml(t);t.push("")},e.toMarkdown=function(t){for(var e,r=i(this.elements);!(e=r()).done;)e.value.toMarkdown(t)},e.toText=function(t){for(var e,r=i(this.elements);!(e=r()).done;)e.value.toText(t)},t}(),a=function(){function t(t){this.text=t}var e=t.prototype;return e.toHtml=function(t){t.push(this.text)},e.toMarkdown=function(t){t.push(this.text)},e.toText=function(t){t.push(this.text)},t}(),p=function(){function t(t,e){this.closed=!0,this.closed=!!e,this.elements=n(Array,t)}var e=t.prototype;return e.toMarkdownSuper=function(t,e,r){r.push(t);for(var n,o=i(this.elements);!(n=o()).done;)n.value.toMarkdown(r);r.push(e)},e.toHtmlSuper=function(t,e,r,n){this.closed||(t=n,e=""),r.push(t);for(var o,s=i(this.elements);!(o=s()).done;)o.value.toHtml(r);r.push(e)},e.toText=function(t){for(var e,r=i(this.elements);!(e=r()).done;)e.value.toText(t)},t}(),l=function(e){function r(t,r){return e.call(this,t,r)||this}t(r,e);var n=r.prototype;return n.toHtml=function(t){e.prototype.toHtmlSuper.call(this,"<s>","</s>",t,"~~")},n.toMarkdown=function(t){e.prototype.toMarkdownSuper.call(this,"~~","~~",t)},r}(p),f=function(e){function r(t,r){return e.call(this,t,r)||this}t(r,e);var n=r.prototype;return n.toHtml=function(t){e.prototype.toHtmlSuper.call(this,"<strong>","</strong>",t,"**")},n.toMarkdown=function(t){e.prototype.toMarkdownSuper.call(this,"**","**",t)},r}(p),T=function(e){function r(t,r){return e.call(this,t,r)||this}t(r,e);var n=r.prototype;return n.toHtml=function(t){e.prototype.toHtmlSuper.call(this,"<em>","</em>",t,"__")},n.toMarkdown=function(t){e.prototype.toMarkdownSuper.call(this,"__","__",t)},r}(p),k=function(e){function r(t,r){return e.call(this,t,r)||this}t(r,e);var n=r.prototype;return n.toHtml=function(t){e.prototype.toHtmlSuper.call(this,"<pre>","</pre>",t,"```")},n.toMarkdown=function(t){e.prototype.toMarkdownSuper.call(this,"```","```",t)},r}(p),v=function(e){function r(t,r,n){var o;return(o=e.call(this)||this).curElem="",o.curLine="",o.thrownError=!1,o.isHeaderRequired=!1,o.isLinkRequired=!1,o.isLinkRequired=!!n,o.isHeaderRequired=!!r,o.source=[t],console.log("data",[t]),o}t(r,e);var n=r.prototype;return n.replaceHtmlSpecials=function(t){for(var e,r=[],n=i(t);!(e=n()).done;){var o=e.value;r.push("<"===o?"&lt;":">"===o?"&gt;":"&"===o?"&amp;":o)}return r.join("")},n.parseToHtml=function(){for(var t,e=[],r=i(this.parse());!(t=r()).done;)t.value.toHtml(e);return e.join("")},n.parse=function(){for(var t=new Array;this.nextElement();)this.tr=new u(this.curElem),this.nextToken(),t.push(new h(this.parseItems()));return console.log("ans:",t),t},r.isText=function(t){return t===s.TEXT},n.parseItems=function(){for(var t=new Array;this.curToken!==s.END;)if(r.isText(this.curToken))t.push(new a(this.curStringToken)),this.nextToken();else{var e=this.curToken;this.nextToken(),t.push.apply(t,this.parseItem(e))}return t},n.parseItem=function(t){for(var e=new Array;this.curToken!==s.END&&this.curToken!==t;)if(r.isText(this.curToken))e.push(new a(this.curStringToken)),this.nextToken();else{var n=this.curToken;this.nextToken(),e.push.apply(e,this.parseItem(n))}return this.curToken===t?(this.nextToken(),this.create(e,t,!0)):(this.nextToken(),this.create(e,t,!1))},n.create=function(t,e,r){switch(e){case s.STRIKEOUT:return[new l(t,r)];case s.STRONG:return[new f(t,r)];case s.EMPHASIS:return[new T(t,r)];case s.CODE:return[new k(t,r)];default:return this.thrownError=!0,[new k(t,r)]}},n.skipEmpties=function(){for(this.curLine=this.next();null!==this.curLine&&""===this.curLine;)this.curLine=this.next()},n.nextElement=function(){if(this.skipEmpties(),null===this.curLine)return!1;var t=new Array;for(t.push(this.curLine),this.curLine=this.next();null!==this.curLine&&""!==this.curLine;)t.push("\n"),t.push(this.curLine),this.curLine=this.next();return console.log(t),this.curElem=t.join(""),!0},n.next=function(){var t=0===this.source.length?null:this.source.shift();return void 0!==t?t:null},r}(c);exports.BlockMarkableItem=p,exports.Code=k,exports.Emphasis=T,exports.MdParser=v,exports.Paragraph=h,exports.Strikeout=l,exports.Strong=f,exports.Text=a;
//# sourceMappingURL=md-parser.cjs.production.min.js.map
