"use strict";function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,e)}function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function n(t,s,i){return(n=e()?Reflect.construct:function(t,e,n){var s=[null];s.push.apply(s,e);var i=new(Function.bind.apply(t,s));return n&&r(i,n.prototype),i}).apply(null,arguments)}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return s(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,void 0):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o;Object.defineProperty(exports,"__esModule",{value:!0}),function(t){t[t.END=0]="END",t[t.EMPHASIS=1]="EMPHASIS",t[t.STRONG=2]="STRONG",t[t.STRIKEOUT=3]="STRIKEOUT",t[t.CODE=4]="CODE",t[t.TEXT=5]="TEXT",t[t._EMPHASIS=6]="_EMPHASIS",t[t.__STRONG=7]="__STRONG",t[t.IMG=8]="IMG"}(o||(o={}));var u=function(){function t(t,r){this.name=t,this.src=r}var r=t.prototype;return r.toHtml=function(t){t.push("<img alt='"),t.push(this.name),t.push("' src='"),t.push(this.src),t.push("'>")},r.toMarkdown=function(t){throw t},t}(),h=function(){function t(t,r){this.source="",this.pos=0,this.curToken=o.CODE,this.curStringToken="",this.tags=["**","__","--","*","_","`"],this.imgName="",this.imgSrc="",this.strToToken=new Map([["**",o.STRONG],["*",o.EMPHASIS],["--",o.STRIKEOUT],["`",o.CODE],["_",o._EMPHASIS],["__",o.__STRONG],["![",o.IMG]]),this.curTag="",r&&this.tags.push("!["),this.source=t,this.pos=0}var r=t.prototype;return r.checkTag=function(){for(var t,r=i(this.tags);!(t=r()).done;){var e=t.value;if(this.source.startsWith(e,this.pos))return this.curTag=e,!0}return!1},r.test=function(t){return this.pos<this.source.length&&t===this.source[this.pos]},r.parseImg=function(){for(var t,r,e=this.pos;this.pos<this.source.length&&!this.source.startsWith("](",this.pos);)this.pos++;if(this.pos<this.source.length&&this.source.startsWith("](",this.pos)){for(t=this.pos;this.pos<this.source.length&&!this.source.startsWith(")",this.pos);)this.pos++;if(this.pos<this.source.length&&this.source.startsWith(")",this.pos))return r=this.pos,this.imgName=this.source.substring(e,t),this.imgSrc=this.source.substring(t+2,r),void this.pos++}throw"atata"},r.getImg=function(){return new u(this.imgName,this.imgSrc)},r.nextToken=function(){if(this.pos>=this.source.length)return o.END;if(this.checkTag()){this.curStringToken=this.curTag;var t=this.strToToken.get(this.curTag);return this.curToken=void 0===t?o.CODE:t,this.pos+=this.curTag.length,this.curToken===o.IMG&&this.parseImg(),this.curToken}for(var r=new Array;this.pos<this.source.length&&!this.checkTag();){var e=this.source.charAt(this.pos++);"<"===e?r.push("&lt;"):">"===e?r.push("&gt;"):"&"===e?r.push("&amp;"):"\\"===e&&this.pos<this.source.length&&(this.test("*")||this.test("_"))?r.push(this.source.charAt(this.pos++)):r.push(e)}return this.curToken=o.TEXT,this.curStringToken=r.join(""),this.curToken},r.getStringToken=function(){return this.curStringToken},t}(),c=function(){function t(){this.tr=new h(""),this.curToken=o.CODE,this.curStringToken=""}return t.prototype.nextToken=function(){this.curToken=this.tr.nextToken(),this.curStringToken=this.tr.getStringToken()},t}(),a=function(){function t(t){this.elements=n(Array,t)}var r=t.prototype;return r.toHtml=function(t){t.push("<p>");for(var r,e=i(this.elements);!(r=e()).done;)r.value.toHtml(t);t.push("</p>")},r.toMarkdown=function(t){for(var r,e=i(this.elements);!(r=e()).done;)r.value.toMarkdown(t)},t}(),p=function(){function t(t,r){this.hLevel=r,this.elements=n(Array,t)}var r=t.prototype;return r.toHtml=function(t){t.push("<h"+this.hLevel+">");for(var r,e=i(this.elements);!(r=e()).done;)r.value.toHtml(t);t.push("</h"+this.hLevel+">")},r.toMarkdown=function(t){throw t},t}(),l=function(){function t(t){this.text=t}var r=t.prototype;return r.toHtml=function(t){t.push(this.text)},r.toMarkdown=function(t){t.push(this.text)},t}(),f=function(){function t(t){this.elements=n(Array,t)}var r=t.prototype;return r.toMarkdownSuper=function(t,r,e){e.push(t);for(var n,s=i(this.elements);!(n=s()).done;)n.value.toMarkdown(e);e.push(r)},r.toHtmlSuper=function(t,r,e){e.push(t);for(var n,s=i(this.elements);!(n=s()).done;)n.value.toHtml(e);e.push(r)},t}(),T=function(r){function e(t){return r.call(this,t)||this}t(e,r);var n=e.prototype;return n.toHtml=function(t){r.prototype.toHtmlSuper.call(this,"<s>","</s>",t)},n.toMarkdown=function(t){r.prototype.toMarkdownSuper.call(this,"~","~",t)},e}(f),m=function(r){function e(t){return r.call(this,t)||this}t(e,r);var n=e.prototype;return n.toHtml=function(t){r.prototype.toHtmlSuper.call(this,"<strong>","</strong>",t)},n.toMarkdown=function(t){r.prototype.toMarkdownSuper.call(this,"__","__",t)},e}(f),g=function(r){function e(t){return r.call(this,t)||this}t(e,r);var n=e.prototype;return n.toHtml=function(t){r.prototype.toHtmlSuper.call(this,"<em>","</em>",t)},n.toMarkdown=function(t){r.prototype.toMarkdownSuper.call(this,"*","*",t)},e}(f),S=function(r){function e(t){return r.call(this,t)||this}t(e,r);var n=e.prototype;return n.toHtml=function(t){r.prototype.toHtmlSuper.call(this,"<code>","</code>",t)},n.toMarkdown=function(t){r.prototype.toMarkdownSuper.call(this,"`","`",t)},e}(f),k=function(r){function e(t,e,n){var s;return(s=r.call(this)||this).curElem="",s.curLine="",s.headerStarts=["###### ","##### ","#### ","### ","## ","# "],s.hLevel=0,s.thrownError=!1,s.isHeaderRequired=!1,s.isImageRequired=!1,s.isImageRequired=!!n,s.isHeaderRequired=!!e,s.source=t.trim().split("\n"),s}t(e,r);var n=e.prototype;return n.parseToHtml=function(){var t=this.parse();return this.thrownError?this.source.join("\n"):t.join("")},n.parse=function(){for(var t=new Array;this.nextElement();)this.isParagraph()?(this.tr=new h(this.curElem,this.isImageRequired),this.nextToken(),t.push(new a(this.parseItems()))):(this.tr=new h(this.curElem.substring(this.hLevel+1),this.isImageRequired),this.nextToken(),t.push(new p(this.parseItems(),this.hLevel)));return t},n.isText=function(t){return t===o.TEXT},n.parseItems=function(){for(var t=new Array;this.curToken!==o.END;)if(this.isText(this.curToken))t.push(new l(this.curStringToken)),this.nextToken();else if(this.curToken===o.IMG)t.push(this.tr.getImg()),this.nextToken();else{var r=this.curToken;this.nextToken(),t.push.apply(t,this.parseItem(r))}return t},n.parseItem=function(t){for(var r=new Array;this.curToken!==o.END&&this.curToken!==t;)if(this.isText(this.curToken))r.push(new l(this.curStringToken)),this.nextToken();else if(this.curToken===o.IMG)r.push(this.tr.getImg()),this.nextToken();else{var e=this.curToken;this.nextToken(),r.push.apply(r,this.parseItem(e))}if(this.curToken===t)return this.nextToken(),this.create(r,t);if(t===o.EMPHASIS||t===o._EMPHASIS){var n=new Array;return n.push(new l(this.tokenToString(t))),n.push.apply(n,r),this.nextToken(),n}return this.thrownError=!0,[]},n.tokenToString=function(t){switch(t){case o.STRIKEOUT:return"--";case o.STRONG:return"**";case o.__STRONG:return"__";case o.EMPHASIS:return"*";case o._EMPHASIS:return"_";case o.CODE:return"`";default:return this.thrownError=!0,""}},n.create=function(t,r){switch(r){case o.STRIKEOUT:return[new T(t)];case o.STRONG:case o.__STRONG:return[new m(t)];case o.EMPHASIS:case o._EMPHASIS:return[new g(t)];case o.CODE:return[new S(t)];default:return this.thrownError=!0,[new S(t)]}},n.skipEmpties=function(){for(this.curLine=this.next();null!==this.curLine&&""===this.curLine;)this.curLine=this.next()},n.nextElement=function(){if(this.skipEmpties(),null===this.curLine)return!1;var t=new Array;for(t.push(this.curLine),this.curLine=this.next();null!==this.curLine&&""!==this.curLine;)t.push("\n"),t.push(this.curLine),this.curLine=this.next();return this.curElem=t.join(""),!0},n.next=function(){var t=0===this.source.length?null:this.source.shift();return void 0!==t?t:null},n.isParagraph=function(){if(this.isHeaderRequired)for(var t,r=i(this.headerStarts);!(t=r()).done;){var e=t.value;if(this.curElem.startsWith(e))return this.hLevel=e.length-1,!1}return!0},e}(c);exports.BlockMarkableItem=f,exports.Code=S,exports.Emphasis=g,exports.Header=p,exports.Image=u,exports.MdParser=k,exports.Paragraph=a,exports.Strikeout=T,exports.Strong=m,exports.Text=l;
//# sourceMappingURL=md-parser.cjs.production.min.js.map
