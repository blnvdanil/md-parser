{"version":3,"file":"md-parser.esm.js","sources":["../src/Token.ts","../src/markup/Image.ts","../src/TokenReader.ts","../src/BaseParser.ts","../src/markup/Paragraph.ts","../src/markup/Header.ts","../src/markup/Text.ts","../src/markup/BlockMarkableItem.ts","../src/markup/Strikeout.ts","../src/markup/Strong.ts","../src/markup/Emphasis.ts","../src/markup/Code.ts","../src/MdParser.ts"],"sourcesContent":["export enum Token {\n  END,\n  EMPHASIS,\n  STRONG,\n  STRIKEOUT,\n  CODE,\n  TEXT,\n  _EMPHASIS,\n  __STRONG,\n  IMG\n}\n","import {BlockItem} from './BlockItem';\n\nexport class Image implements BlockItem {\n  private readonly name: string;\n  private readonly src: string;\n\n  constructor(name: string, src: string) {\n    this.name = name;\n    this.src = src;\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push('<img alt=\\'');\n    st.push(this.name);\n    st.push('\\' src=\\'');\n    st.push(this.src);\n    st.push('\\'>');\n  }\n\n  toMarkdown(st: Array<string>): void {\n    throw st;\n  }\n\n  toText(st: Array<string>): void {\n    st.push('');\n  }\n\n\n}\n","import { Token } from './Token';\nimport { Image } from './markup/Image';\n\nexport class TokenReader {\n  private readonly source: string = '';\n\n  private pos: number = 0;\n\n  private curToken: Token = Token.CODE;\n\n  private curStringToken: string = '';\n\n  private tags: string[] = ['**', '__', '--', '*', '_', '`'];\n\n  private imgName: string = '';\n\n  private imgSrc: string = '';\n\n  private strToToken = new Map([\n    ['**', Token.STRONG],\n    ['*', Token.EMPHASIS],\n    ['--', Token.STRIKEOUT],\n    ['`', Token.CODE],\n    ['_', Token._EMPHASIS],\n    ['__', Token.__STRONG],\n    ['![', Token.IMG],\n  ]);\n\n  private curTag: string = '';\n\n  constructor(source: string, isImageRequired?: boolean) {\n    if (isImageRequired) {\n      this.tags.push('![');\n    }\n    this.source = source;\n    this.pos = 0;\n  }\n\n  private checkTag(): boolean {\n    for (const tag of this.tags) {\n      if (this.source.startsWith(tag, this.pos)) {\n        this.curTag = tag;\n        return true;\n      }\n    }\n    return false;\n  }\n\n  private test(ch: string): boolean {\n    return this.pos < this.source.length && ch === this.source[this.pos];\n  }\n\n  private parseImg(): void {\n    const start: number = this.pos;\n    let mid: number;\n    let end: number;\n    while (this.pos < this.source.length &&\n          !this.source.startsWith('](', this.pos)) {\n      this.pos++;\n    }\n    if (this.pos < this.source.length && this.source.startsWith('](', this.pos)) {\n      mid = this.pos;\n      while (this.pos < this.source.length && !this.source.startsWith(')', this.pos)) {\n        this.pos++;\n      }\n      if (this.pos < this.source.length && this.source.startsWith(')', this.pos)) {\n        end = this.pos;\n        this.imgName = this.source.substring(start, mid);\n        this.imgSrc = this.source.substring(mid + 2, end);\n        this.pos++;\n        return;\n      }\n    }\n    throw 'atata';\n  }\n\n  public getImg(): Image {\n    return new Image(this.imgName, this.imgSrc);\n  }\n\n  public nextToken(): Token {\n    if (this.pos >= this.source.length) {\n      return Token.END;\n    }\n\n    if (this.checkTag()) {\n      this.curStringToken = this.curTag;\n      const temp = this.strToToken.get(this.curTag);\n      this.curToken = temp === undefined ? Token.CODE : temp;\n      this.pos += this.curTag.length;\n      if (this.curToken === Token.IMG) {\n        this.parseImg();\n      }\n      return this.curToken;\n    }\n\n    const sb: Array<string> = new Array<string>();\n\n    while (this.pos < this.source.length && !this.checkTag()) {\n      const ch: string = this.source.charAt(this.pos++);\n      if (ch === '<') {\n        sb.push('&lt;');\n      } else if (ch === '>') {\n        sb.push('&gt;');\n      } else if (ch === '&') {\n        sb.push('&amp;');\n      } else if (ch === '\\\\' && this.pos < this.source.length && (this.test('*') || this.test('_'))) {\n        sb.push(this.source.charAt(this.pos++));\n      } else {\n        sb.push(ch);\n      }\n    }\n\n    this.curToken = Token.TEXT;\n\n    this.curStringToken = sb.join('');\n\n    return this.curToken;\n  }\n\n\n  public getStringToken(): string {\n    return this.curStringToken;\n  }\n}\n","import { TokenReader } from './TokenReader';\nimport { Token } from './Token';\n\nexport abstract class BaseParser {\n  protected tr: TokenReader;\n  protected curToken: Token;\n  protected curStringToken: string;\n\n  protected nextToken(): void {\n    this.curToken = this.tr.nextToken();\n    this.curStringToken = this.tr.getStringToken();\n  }\n\n  protected constructor() {\n    this.tr = new TokenReader('');\n    this.curToken = Token.CODE;\n    this.curStringToken = '';\n  }\n}\n","import {Markable} from './Markable';\nimport {BlockItem} from './BlockItem';\n\nexport class Paragraph implements Markable {\n  private readonly elements: Array<BlockItem>;\n\n  constructor(elements: Array<BlockItem>) {\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push('<p>');\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push('</p>');\n  }\n\n  toMarkdown(st: Array<string>): void {\n    for (const elem of this.elements) {\n      elem.toMarkdown(st);\n    }\n  }\n\n  toText(st: Array<string>) {\n    for (const elem of this.elements) {\n      elem.toText(st);\n    }\n  }\n\n\n}\n","import {Markable} from './Markable';\nimport {BlockItem} from './BlockItem';\n\nexport class Header implements Markable {\n\n  private elements: Array<BlockItem>;\n  private hLevel: number;\n\n  constructor(elements: Array<BlockItem>, hLevel: number) {\n    this.hLevel = hLevel;\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push(`<h${this.hLevel}>`);\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push(`</h${this.hLevel}>`);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    throw st;\n  }\n\n  toText(st: Array<string>): void {\n    st.push(\"\");\n  }\n\n}\n","import {BlockItem} from './BlockItem';\n\nexport class Text implements BlockItem {\n  private text: string;\n\n  constructor(text: string) {\n    this.text = text;\n  }\n\n  toHtml(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n  toText(st: Array<string>): void {\n    st.push(this.text);\n  }\n\n}\n","import {BlockItem} from './BlockItem';\n\nexport abstract class BlockMarkableItem implements BlockItem {\n  private elements: Array<BlockItem>;\n\n  protected constructor(elements: Array<BlockItem>) {\n    this.elements = new Array<BlockItem>(...elements);\n  }\n\n  protected toMarkdownSuper(start: string, end: string, st: Array<string>): void {\n    st.push(start);\n    for (const elem of this.elements) {\n      elem.toMarkdown(st);\n    }\n    st.push(end);\n  }\n\n  protected toHtmlSuper(start: string, end: string, st: Array<string>): void {\n    st.push(start);\n    for (const elem of this.elements) {\n      elem.toHtml(st);\n    }\n    st.push(end);\n  }\n\n  public toText(st: Array<string>): void {\n    for (const elem of this.elements) {\n      elem.toText(st);\n    }\n  }\n\n  abstract toMarkdown(st: Array<string>): void;\n\n  abstract toHtml(st: Array<string>): void;\n}\n\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Strikeout extends BlockMarkableItem {\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<s>', '</s>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('~', '~', st);\n  }\n}\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Strong extends BlockMarkableItem {\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<strong>', '</strong>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('__', '__', st);\n  }\n}\n","import {BlockItem} from './BlockItem';\nimport {BlockMarkableItem} from './BlockMarkableItem';\n\nexport class Emphasis extends BlockMarkableItem {\n\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<em>', '</em>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('*', '*', st);\n  }\n}\n","import {BlockMarkableItem} from './BlockMarkableItem';\nimport {BlockItem} from './BlockItem';\n\nexport class Code extends BlockMarkableItem {\n\n  constructor(elements: Array<BlockItem>) {\n    super(elements);\n  }\n\n  toHtml(st: Array<string>): void {\n    super.toHtmlSuper('<code>', '</code>', st);\n  }\n\n  toMarkdown(st: Array<string>): void {\n    super.toMarkdownSuper('`', '`', st);\n  }\n}\n","import { BaseParser } from './BaseParser';\nimport { Markable } from './markup/Markable';\nimport { TokenReader } from './TokenReader';\nimport { Paragraph } from './markup/Paragraph';\nimport { Header } from './markup/Header';\nimport { Token } from './Token';\nimport { BlockItem } from './markup/BlockItem';\nimport { Text } from './markup/Text';\nimport { Strikeout } from './markup/Strikeout';\nimport { Strong } from './markup/Strong';\nimport { Emphasis } from './markup/Emphasis';\nimport { Code } from './markup/Code';\n\n\nexport class MdParser extends BaseParser {\n  private readonly source: Array<string>;\n  private curElem: string = '';\n  private curLine: string | null = '';\n  private headerStarts = ['###### ', '##### ', '#### ', '### ', '## ', '# '];\n\n  private hLevel: number = 0;\n\n  thrownError: boolean = false;\n\n  isHeaderRequired: boolean = false;\n  isImageRequired: boolean = false;\n\n  constructor(data: string, isHeaderRequired?: boolean, isImageRequired?: boolean) {\n    super();\n    this.isImageRequired = !!isImageRequired;\n    this.isHeaderRequired = !!isHeaderRequired;\n    this.source = data.trim().split('\\n');\n  }\n\n  public parseToHtml(): string {\n    const res = this.parse();\n    const html: Array<string> = [];\n    const md: Array<string> = [];\n    const text: Array<string> =[];\n    console.log('html', [html]);\n    console.log('md', [md]);\n    console.log('text', [text]);\n    for (const elem of res) {\n      elem.toText(text);\n      elem.toHtml(html);\n      elem.toMarkdown(md);\n    }\n    const htmlStr: string = html.join('');\n    const mdStr: string = md.join('');\n    const textStr: string = text.join('');\n    console.log('html', [htmlStr]);\n    console.log('md', [mdStr]);\n    console.log('text', [textStr]);\n    if (textStr === '') {\n      return mdStr;\n    } else {\n      return htmlStr;\n    }\n  }\n\n  public parse(): Array<Markable> {\n    const ans = new Array<Markable>();\n    while (this.nextElement()) {\n      if (this.isParagraph()) {\n        this.tr = new TokenReader(this.curElem, this.isImageRequired);\n        this.nextToken();\n        ans.push(new Paragraph(this.parseItems()));\n      } else {\n        this.tr = new TokenReader(this.curElem.substring(this.hLevel + 1), this.isImageRequired);\n        this.nextToken();\n        ans.push(new Header(this.parseItems(), this.hLevel));\n      }\n    }\n    return ans;\n  }\n\n  private isText(token: Token) {\n    return token === Token.TEXT;\n  }\n\n  private parseItems(): Array<BlockItem> {\n    const ans = new Array<BlockItem>();\n    while (this.curToken !== Token.END) {\n      if (this.isText(this.curToken)) {\n        ans.push(new Text(this.curStringToken));\n        this.nextToken();\n      } else if (this.curToken === Token.IMG) {\n        ans.push(this.tr.getImg());\n        this.nextToken();\n      } else {\n        const start: Token = this.curToken;\n        this.nextToken();\n        ans.push(...this.parseItem(start));\n      }\n    }\n    return ans;\n  }\n\n  private parseItem(start: Token): Array<BlockItem> {\n    const ans = new Array<BlockItem>();\n    while (this.curToken !== Token.END && this.curToken !== start) {\n      if (this.isText(this.curToken)) {\n        ans.push(new Text(this.curStringToken));\n        this.nextToken();\n      } else if (this.curToken === Token.IMG) {\n        ans.push(this.tr.getImg());\n        this.nextToken();\n      } else {\n        const st: Token = this.curToken;\n        this.nextToken();\n        ans.push(...this.parseItem(st));\n      }\n    }\n    if (this.curToken === start) {\n      this.nextToken();\n      return this.create(ans, start);\n    } else if (start === Token.EMPHASIS || start === Token._EMPHASIS) {\n      const temp = new Array<BlockItem>();\n      temp.push(new Text(this.tokenToString(start)));\n      temp.push(...ans);\n      this.nextToken();\n      return temp;\n    } else {\n      this.thrownError = true;\n      return [];\n    }\n  }\n\n  private tokenToString(token: Token): string {\n    switch (token) {\n      case Token.STRIKEOUT: {\n        return '--';\n      }\n      case Token.STRONG: {\n        return '**';\n      }\n      case Token.__STRONG: {\n        return '__';\n      }\n      case Token.EMPHASIS: {\n        return '*';\n      }\n      case Token._EMPHASIS: {\n        return '_';\n      }\n      case Token.CODE: {\n        return '`';\n      }\n      default: {\n        this.thrownError = true;\n        return \"\";\n      }\n    }\n  }\n\n  private create(ans: Array<BlockItem>, token: Token): Array<BlockItem> {\n    switch (token) {\n      case Token.STRIKEOUT: {\n        return [new Strikeout(ans)];\n      }\n      case Token.STRONG: {\n        return [new Strong(ans)];\n      }\n      case Token.__STRONG: {\n        return [new Strong(ans)];\n      }\n      case Token.EMPHASIS: {\n        return [new Emphasis(ans)];\n      }\n      case Token._EMPHASIS: {\n        return [new Emphasis(ans)];\n      }\n      case Token.CODE: {\n        return [new Code(ans)];\n      }\n      default: {\n        this.thrownError = true;\n        return [new Code(ans)];\n      }\n    }\n  }\n\n  private skipEmpties(): void {\n    this.curLine = this.next();\n    while (this.curLine !== null && this.curLine === '') {\n      this.curLine = this.next();\n    }\n  }\n\n  private nextElement(): boolean {\n    this.skipEmpties();\n    if (this.curLine === null) {\n      return false;\n    }\n    const elem = new Array<string>();\n    elem.push(this.curLine);\n    this.curLine = this.next();\n    while (this.curLine !== null && this.curLine !== '') {\n      elem.push('\\n');\n      elem.push(this.curLine);\n      this.curLine = this.next();\n    }\n    this.curElem = elem.join('');\n    return true;\n  }\n\n  next(): string | null {\n    const exp = this.source.length === 0 ? null : this.source.shift();\n    if (exp !== undefined) {\n      return exp;\n    }\n    return null;\n  }\n\n  private isParagraph(): boolean {\n    if (this.isHeaderRequired) {\n      for (const headerStart of this.headerStarts) {\n        if (this.curElem.startsWith(headerStart)) {\n          this.hLevel = headerStart.length - 1;\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n}\n"],"names":["Token","Image","name","src","toHtml","st","push","toMarkdown","toText","TokenReader","source","isImageRequired","CODE","Map","STRONG","EMPHASIS","STRIKEOUT","_EMPHASIS","__STRONG","IMG","tags","pos","checkTag","tag","startsWith","curTag","test","ch","length","parseImg","start","mid","end","imgName","substring","imgSrc","getImg","nextToken","END","curStringToken","temp","strToToken","get","curToken","undefined","sb","Array","charAt","TEXT","join","getStringToken","BaseParser","tr","Paragraph","elements","elem","Header","hLevel","Text","text","BlockMarkableItem","toMarkdownSuper","toHtmlSuper","Strikeout","Strong","Emphasis","Code","MdParser","data","isHeaderRequired","trim","split","parseToHtml","res","parse","html","md","console","log","htmlStr","mdStr","textStr","ans","nextElement","isParagraph","curElem","parseItems","isText","token","parseItem","create","tokenToString","thrownError","skipEmpties","curLine","next","exp","shift","headerStarts","headerStart"],"mappings":"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"}